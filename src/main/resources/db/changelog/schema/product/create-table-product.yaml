databaseChangeLog:
  - changeSet:
      id: create-table-product
      author: Yura Yeghiazaryan
      changes:
      - createSequence:
          schemaName: product
          sequenceName: product_seq
          startValue: 1
          incrementBy: 1
      - createTable:
          schemaName: product
          tableName: product
          columns:
            - column:
                name: id
                type: bigint
                defaultValueComputed: "nextval('product.product_seq')"
                constraints:
                  primaryKey: true
                  nullable: false
            - column:
                name: name
                type: varchar(255)
                constraints:
                  nullable: false
            - column:
                name: url
                type: varchar(255)
            - column:
                name: description
                type: varchar(255)
            - column:
                name: quantity
                type: int
                constraints:
                  nullable: false
            - column:
                name: price
                type: bigint
                constraints:
                  nullable: false
            - column:
                name: orderId
                type: bigint
                constraints:
                  nullable: false
            - column:
                name: createdByUserId
                type: bigint
                constraints:
                  nullable: false
      - addForeignKeyConstraint:
          baseTableSchemaName: product
          baseTableName: product
          baseColumnNames: orderId
          referencedTableSchemaName: order
          referencedTableName: order
          referencedColumnNames: id
          constraintName: fk_order_id

      - addForeignKeyConstraint:
          baseTableSchemaName: product
          baseTableName: product
          baseColumnNames: createdByUserId
          referencedTableSchemaName: user
          referencedTableName: user
          referencedColumnNames: id
          constraintName: fk_user_id
